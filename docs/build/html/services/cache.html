

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Caching &mdash; brainiak  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="brainiak  documentation" href="../index.html"/>
        <link rel="up" title="Services" href="../services.html"/>
        <link rel="next" title="Internationalization" href="i18n.html"/>
        <link rel="prev" title="Handling Errors" href="errors.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> brainiak</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/resources.html">Ubiquitous Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/rest_verbs.html">Using HTTP methods in a RESTful way</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/hypermedia.html">Hypermedia Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/modeling.html">Modeling and Ontology Engineering</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/how_to_read_this_documentation.html">How to read this documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/building_local_dev_environment.html">Building Brainiak in your local environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../globocom/authorization.html">Authorization</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../services.html">Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="context/context.html">Managing Contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="prefix/prefix.html">Managing Prefixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="collection/collection.html">Managing Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema/schema.html">Managing Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="instance/instance.html">Managing Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="search/search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="suggest/suggest.html">Suggest</a></li>
<li class="toctree-l2"><a class="reference internal" href="stored_query/stored_query.html">Stored Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html">Overriding URIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="links.html">Hypermap of Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="links.html#links-specification">Links Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="links.html#rel-vocabulary">Rel Vocabulary</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagination.html">Pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Handling Errors</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html">Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html#convention-for-url-resources">Convention for URL Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html#service-examples">Service Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot.html#i-receive-error-404-with-message-x-brainiak-client-id-is-not-known">I receive error 404 with message &#8216;X-Brainiak-Client-Id&#8217; is not known</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot.html#how-to-check-if-brainiak-is-connected-with-the-backend-triplestore">How to check if Brainiak is connected with the backend triplestore?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot.html#how-to-check-if-brainiak-is-connected-with-the-activemq">How to check if Brainiak is connected with the ActiveMQ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot.html#any-service-gives-me-the-message-access-to-backend-service-failed">Any service gives me the message: &#8220;Access to backend service failed&#8221;?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshoot.html#when-filtering-instances-using-p-and-o-i-only-get-http-error-404-but-when-i-only-use-p-it-lists-items-containing-the-o-i-defined-what-am-i-doing-wrong">When filtering instances using <tt class="docutils literal"><span class="pre">p</span></tt> and <tt class="docutils literal"><span class="pre">o</span></tt> I only get &#8220;HTTP error: 404&#8221;. But when I only use <tt class="docutils literal"><span class="pre">p</span></tt>, it lists items containing the <tt class="docutils literal"><span class="pre">o</span></tt> I defined. What am I doing wrong?</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-5">Version 2.7.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-4-2014-08-14">Version 2.7.4 - 2014/08/14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-3-2014-08-05">Version 2.7.3 - 2014/08/05</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-2-2014-08-01">Version 2.7.2 - 2014/08/01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-1-2014-07-30">Version 2.7.1 - 2014/07/30</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-7-0-2014-07-29">Version 2.7.0 - 2014/07/29</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-6-0-2014-07-07">Version 2.6.0 - 2014/07/07</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-5-1-2014-06-06">Version 2.5.1 - 2014/06/06</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-5-0-2014-05-19">Version 2.5.0 - 2014/05/19</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-4-4-2014-02-04">Version 2.4.4 - 2014/02/04</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-4-3-2014-01-17">Version 2.4.3 - 2014/01/17</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-4-2-2014-01-15">Version 2.4.2 - 2014/01/15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-4-1-2014-01-10">Version 2.4.1 - 2014/01/10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-4-0-2013-11-28">Version 2.4.0 - 2013/11/28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-8-2013-10-04">Version 2.3.8 - 2013/10/04</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-7-2013-10-31">Version 2.3.7 - 2013/10/31</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-6-2013-10-28">Version 2.3.6 - 2013/10/28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-3-2-3-5-2013-10-28">Version 2.3.3-2.3.5 - 2013/10/28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-2-2013-10-28">Version 2.3.2 - 2013/10/28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-1-2013-10-23">Version 2.3.1 - 2013/10/23</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-3-0-2013-10-22">Version 2.3.0 - 2013/10/22</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-2-5-2013-10-15">Version 2.2.5 - 2013/10/15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-2-3-2-2-4-2013-09-25">Version 2.2.3 + 2.2.4 - 2013/09/25</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-2-0-2-2-2-2013-08-29">Version 2.2.0 + 2.2.2 - 2013/08/29</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-1-0-2013-08-01">Version 2.1.0 - 2013/08/01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-2-0-0-2013-07-18">Version 2.0.0 - 2013/07/18</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-1-1-0-2013-05-28">Version 1.1.0 - 2013/05/28</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#version-1-0-0-2013-04-24">Version 1.0.0  - 2013/04/24</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">brainiak</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../services.html">Services</a> &raquo;</li>
      
    <li>Caching</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/services/cache.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="caching">
<h1>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h1>
<div class="section" id="enabling-cache">
<h2>Enabling cache<a class="headerlink" href="#enabling-cache" title="Permalink to this headline">¶</a></h2>
<p>Cache is enabled or disabled at the <tt class="docutils literal"><span class="pre">settings.py</span></tt> of the application, through the variable <tt class="docutils literal"><span class="pre">ENABLE_CACHE</span></tt>.
When this global cache configuration is enabled, cache is set (or not) for each resource of the API.
To check if cache is enabled for some resource, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X OPTIONS http://brainiak.semantica.dev.globoi.com/

HTTP/1.1 204 No Content
Server: nginx
Date: Thu, 03 Jul 2014 21:00:33 GMT
Content-Type: text/html; <span class="nv">charset</span><span class="o">=</span>UTF-8
Content-Length: 0
Connection: keep-alive
Access-Control-Allow-Methods: GET, OPTIONS, PURGE
Access-Control-Max-Age: 86400
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type, Authorization, Backstage-Client-Id
</pre></div>
</div>
<p>If cache is enabled, <tt class="docutils literal"><span class="pre">PURGE</span></tt> will be shown on the response header <tt class="docutils literal"><span class="pre">Access-Control-Allow-Methods</span></tt>.</p>
</div>
<div class="section" id="resource-cache-status">
<h2>Resource cache status<a class="headerlink" href="#resource-cache-status" title="Permalink to this headline">¶</a></h2>
<p>It is possible to check the cache status of a certain resource by the following headers:</p>
<blockquote>
<div><ul class="simple">
<li><strong>X-Cache</strong>: tells if there was a <tt class="docutils literal"><span class="pre">HIT</span></tt> (cached data) or <tt class="docutils literal"><span class="pre">MISS</span></tt> (fresh data) at Brainiak API</li>
<li><strong>Last-Modified</strong>: date and time when the response was computed. This is specially useful when <tt class="docutils literal"><span class="pre">X-Cache</span></tt> returns <tt class="docutils literal"><span class="pre">HIT</span></tt>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The first time a URL is accessed, there will be no cache - so <tt class="docutils literal"><span class="pre">X-Cache</span></tt>  will return <tt class="docutils literal"><span class="pre">MISS</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X GET http://brainiak.semantica.dev.globoi.com/

HTTP/1.1 200 OK
Server: nginx
Date: Thu, 03 Jul 2014 21:00:35 GMT
Content-Type: application/json; <span class="nv">profile</span><span class="o">=</span>http://brainiak.semantica.dev.globoi.com/_schema_list
Content-Length: 1008
Connection: keep-alive
X-Cache: MISS from brainiak.semantica.dev.globoi.com
Last-Modified: Thu, 03 Jul 2014 18:00:35 -0300
Etag: <span class="s2">&quot;4d53e4145ce64273c7604ad86c4cc81d5dddbb05&quot;</span>
Access-Control-Allow-Origin: *
</pre></div>
</div>
<p>From the second time on, <tt class="docutils literal"><span class="pre">X-Cache</span></tt> will contain <tt class="docutils literal"><span class="pre">HIT</span></tt> and <tt class="docutils literal"><span class="pre">Last-Modified</span></tt> will be the same:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X GET http://brainiak.semantica.dev.globoi.com/

HTTP/1.1 200 OK
Server: nginx
Date: Thu, 03 Jul 2014 21:00:36 GMT
Content-Type: application/json; <span class="nv">profile</span><span class="o">=</span>http://brainiak.semantica.dev.globoi.com/_schema_list
Content-Length: 1008
Connection: keep-alive
X-Cache: HIT from brainiak.semantica.dev.globoi.com
Last-Modified: Thu, 03 Jul 2014 18:00:35 -0300
Etag: <span class="s2">&quot;f288c34015f52392c33fd6bffd95e7bfb25c4a0a&quot;</span>
Access-Control-Allow-Origin: *
</pre></div>
</div>
</div>
<div class="section" id="purge">
<h2>Purge<a class="headerlink" href="#purge" title="Permalink to this headline">¶</a></h2>
<p>To cleanup cache, the <tt class="docutils literal"><span class="pre">PURGE</span></tt> method should be used.
Note that for purging purposes, query string parameters are ignored.
That means that the same instance could have been cached with different parameters,
but when purging the instance all versions should be removed from the cache disregarding the parameters that they were cached with.</p>
<p>For the time being, we support purging: just the root, a particular instance, the whole cache.</p>
</div>
<div class="section" id="purge-root">
<h2>Purge Root<a class="headerlink" href="#purge-root" title="Permalink to this headline">¶</a></h2>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X PURGE http://brainiak.semantica.dev.globoi.com/

HTTP/1.1 200 OK
Server: nginx
Date: Thu, 03 Jul 2014 21:00:36 GMT
Content-Type: text/html; <span class="nv">charset</span><span class="o">=</span>UTF-8
Content-Length: 0
Connection: keep-alive
Access-Control-Allow-Origin: *
</pre></div>
</div>
</div>
<div class="section" id="purge-instance">
<h2>Purge Instance<a class="headerlink" href="#purge-instance" title="Permalink to this headline">¶</a></h2>
<p>There is support to PURGE a specific instance given its full path.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X PURGE  http://brainiak.semantica.dev.globoi.com/person/Person/IsaacNewton
</pre></div>
</div>
</div>
<div class="section" id="purge-all-recursive-purge">
<h2>Purge all (Recursive purge)<a class="headerlink" href="#purge-all-recursive-purge" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to cleanup recursively, calling <tt class="docutils literal"><span class="pre">PURGE</span></tt> with the header <tt class="docutils literal"><span class="pre">X-Cache-Recursive</span></tt> set to <tt class="docutils literal"><span class="pre">1</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl -i -X PURGE --header <span class="s2">&quot;X-Cache-Recursive: 1&quot;</span> http://brainiak.semantica.dev.globoi.com/
</pre></div>
</div>
<p>At this time, we only accept purging all cache.
In the near future, it will be accepted more granular purging, such as purge everything cached from this context, collection, and so on.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="i18n.html" class="btn btn-neutral float-right" title="Internationalization"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="errors.html" class="btn btn-neutral" title="Handling Errors"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Globo.com, Icaro Medeiros, Rodrigo Senra, Tatiana Al-Chueyr.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>